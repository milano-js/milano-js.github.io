<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="mark-down.html">

<!--
A tiny markdown editor which extends the mark-down element

Example:

    <mark-down-editor>
      Hello, **world!**
    </mark-down-editor>

or alternatively:

    <mark-down-editor text="Hello, **world!**"></mark-down-editor>

-->
<dom-module id="mark-down-editor">

  <link rel="stylesheet" href="mark-down-editor.css">

  <template>
    <div id="markup" part="markup">
      <textarea id="editor" part="editor" value="{{text}}"></textarea>
    </div>
    <mark-down text="{{text}}"></mark-down>
  </template>

</dom-module>

<script>

  Polymer({

    is: 'mark-down-editor',

    properties: {
      /** A string of markdown that you wish to see rendered. */
      text: String,
    },

    configure: function(properties) {
      return {
        text: properties.text || this.textContent,
      };
    },

    ready: function() {
      this._onInputBound = this._onInput.bind(this);
    },

    attached: function() {
      this.$.editor.addEventListener('input', this._onInputBound);
    },

    detached: function() {
      this.$.editor.removeEventListener('input', this._onInputBound);
    },

    _onInput: function() {
      this.text = this.$.editor.value;
    },

  });

</script>
